import{w as Z}from"./comp.BUZR0mcz.js";import{p as A,d as G,c as z,o as d,j as g,t as me,a as E,_ as ne,b3 as re,b4 as le,aR as U,C as l,b as F,w as r,G as i,aw as H,ax as I,F as J,B as b,ai as ve,K as f,au as R,e as j,H as x,k as Q,r as C,aj as _e,h as ee,a2 as Ce}from"./framework.Di3uJiT4.js";import{a as be,b as we,c as he,d as ye,e as Ve,f as ke,g as Pe,h as Ee,i as Re,j as Se,k as Fe,l as Me,m as $e,n as De,o as He,p as Ie,q as ze,r as Be,s as Te,t as Ue,u as je,v as qe,w as oe,x as W,E as te}from"./theme.70ZKAb08.js";const Le=(c=!1)=>{const p=A(c);return{visible:p,show:()=>{p.value=!0},hide:()=>{p.value=!1},toggle:()=>{p.value=!p.value}}},Oe={class:"greetings"},We={class:"green"},Ae=G({__name:"HelloWorld",props:{msg:{}},setup(c){return(p,m)=>(d(),z("div",Oe,[g("h1",We,me(p.msg),1),m[0]||(m[0]=g("h3",null,[E(" You’ve successfully created a project with "),g("a",{href:"https://vite.dev/",target:"_blank",rel:"noopener"},"Vite"),E(" + "),g("a",{href:"https://vuejs.org/",target:"_blank",rel:"noopener"},"Vue 3"),E(". ")],-1))]))}}),Ge=ne(Ae,[["__scopeId","data-v-159c3112"]]),so=Z(Ge),ae={ElAutocomplete:qe,ElCascader:je,ElCheckbox:Ue,ElCheckboxGroup:Te,ElColorPicker:Be,ElDatePicker:ze,ElInput:Ie,ElInputNumber:He,ElInputTag:De,ElMention:$e,ElRadio:Me,ElRate:Fe,ElSelect:Se,ElSelectV2:Re,ElSlider:Ee,ElSwitch:Pe,ElTimePicker:ke,ElTimeSelect:Ve,ElTransfer:ye,ElTreeSelect:he,ElUpload:we,ElSegmented:be},X=G({__name:"ConfigForm",props:re({formConfig:{},formRawConfig:{},rowConfig:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c,{expose:p}){const m=le(c,"modelValue"),M=U("formRef"),v=a=>a.isVisible?a.isVisible(m.value):!0,w=a=>typeof a=="function"?a():a,$=(a,B)=>{var _;return a.field??((_=w(a.formItemProps))==null?void 0:_.prop)??B};return p({formRef:M}),(a,B)=>{const _=l("el-form-item"),s=l("el-col"),k=l("el-row"),q=l("el-form");return d(),F(q,f({ref_key:"formRef",ref:M,model:m.value},a.formRawConfig),{default:r(()=>[i(k,H(I(a.rowConfig)),{default:r(()=>[(d(!0),z(J,null,b(a.formConfig,(t,K)=>ve((d(),F(s,f({key:$(t,K),ref_for:!0},w(t.colProps)),{default:r(()=>[i(_,f({ref_for:!0},w(t.formItemProps)),R({default:r(()=>{var S;return[(S=t.formItemSlots)!=null&&S.default?j("",!0):(d(),z(J,{key:0},[$(t)?(d(),F(x(typeof t.component=="string"?Q(ae)[t.component]:t.component),f({key:0,modelValue:m.value[$(t)],"onUpdate:modelValue":P=>m.value[$(t)]=P,ref_for:!0},w(t.componentProps)),R({_:2},[b(t.componentSlots,(P,h)=>({name:h,fn:r(y=>[C(a.$slots,h,f({ref_for:!0},y))])}))]),1040,["modelValue","onUpdate:modelValue"])):(d(),F(x(typeof t.component=="string"?Q(ae)[t.component]:t.component),f({key:1,ref_for:!0},w(t.componentProps)),R({_:2},[b(t.componentSlots,(P,h)=>({name:h,fn:r(y=>[C(a.$slots,h,f({ref_for:!0},y))])}))]),1040))],64))]}),_:2},[b(t.formItemSlots,(S,P)=>({name:P,fn:r(h=>[C(a.$slots,P,f({ref_for:!0},h))])}))]),1040)]),_:2},1040)),[[_e,v(t)]])),128))]),_:3},16)]),_:3},16,["model"])}}}),io=Z(X),Ke={class:"config-search-page"},Ye={key:0,class:"config-header-wrap"},Je={class:"config-filter-wrap"},Qe={class:"config-filter-list"},Xe={class:"config-filter-controls"},Ze={class:"drawer-btn-box"},Ne={class:"config-table-wrap"},xe={class:"config-pagination-wrap"},eo={class:"config-pagination-controls"},oo=G({__name:"ConfigSearchPage",props:re({pageHeaderConfig:{},filterConfig:{default:()=>[]},tableConfig:{},tableV2Config:{},paginationConfig:{default:()=>({})},request:{}},{filterModel:{required:!0},filterModelModifiers:{}}),emits:["update:filterModel"],setup(c,{expose:p}){const m=G({setup(){return()=>i("div",{class:"list-btn-box"},[i(l("el-divider"),{direction:"vertical",style:"margin-left: 0px"},null),i(l("el-button"),{type:"primary",link:!0,onClick:q},{default:()=>[E("重置")]}),i(l("el-button"),{type:"primary",link:!0,onClick:k},{default:()=>[E("查询")]}),i(l("el-button"),{type:"primary",link:!0,onClick:ie},{default:()=>[E("更多筛选项")]})])}}),M=()=>{const{currentPage:e=1,pageSize:o=10,total:D=0}=c.paginationConfig.paginationProps??{};return{currentPage:e,pageSize:o,total:D}},v=le(c,"filterModel"),w=U("listFilterRef"),$=ee(()=>c.filterConfig.concat([{component:m,formItemProps:{style:"height: calc(100% - 18px)"}}]).map(e=>{const o=oe(e,["onlyInDrawer","onlyInList"]);return{...o,colProps:{span:8,...o.colProps},isVisible:()=>!e.onlyInDrawer}})),a=U("tableRef"),B=U("tableV2Ref"),_=A([]),s=A(M()),k=async()=>{const e=v.value;if(!c.request){_.value=[],s.value.total=0;return}try{const o=await c.request({...e,offset:(s.value.currentPage-1)*s.value.pageSize,limit:s.value.pageSize});_.value=o.data??[],s.value.total=o.total??0}catch(o){te.error("Error fetching data:",o.message),_.value=[],s.value.total=0}},q=()=>{var e,o;(o=(e=w.value)==null?void 0:e.formRef)==null||o.resetFields(),s.value=M(),k()},t=e=>{console.log(`current page: ${e}`),k()},K=e=>{console.log(`${e} items per page`),k()},{visible:S,show:P,hide:h}=Le(),y=A(W(v.value)),Y=U("drawerFilterRef"),se=ee(()=>c.filterConfig.map(e=>{const o=oe(e,["onlyInDrawer","onlyInList"]);return{...o,colProps:{span:24,...o.colProps},isVisible:()=>!e.onlyInList}})),ie=()=>{y.value=W(v.value),P()},ue=async()=>{var e,o,D,T,L;try{await((o=(e=Y.value)==null?void 0:e.formRef)==null?void 0:o.validate()),v.value=W(y.value),k(),h()}catch(O){console.log(O),te.error((L=(T=(D=Object.values(O))==null?void 0:D[0])==null?void 0:T[0])==null?void 0:L.message)}},fe=()=>{y.value=W(v.value)};return p({listFilterRef:w,drawerFilterRef:Y,tableRef:a,tableV2Ref:B,searchHandle:k,resetHandle:q}),(e,o)=>{const D=l("el-page-header"),T=l("el-button"),L=l("el-drawer"),O=l("el-table-column"),de=l("el-table"),ce=l("el-table-v2"),pe=l("el-pagination");return d(),z("div",Ke,[e.pageHeaderConfig?(d(),z("div",Ye,[i(D,H(I(e.pageHeaderConfig.pageHeaderProps)),R({_:2},[b(e.pageHeaderConfig.pageHeaderSlots,(n,u)=>({name:u,fn:r(V=>[C(e.$slots,u,H(I(V)),void 0,!0)])}))]),1040)])):j("",!0),g("div",Je,[g("div",Qe,[i(X,{ref_key:"listFilterRef",ref:w,class:"config-filter-list-form",modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=n=>v.value=n),"form-config":$.value,"form-raw-config":{labelWidth:"auto"},"row-config":{gutter:15}},null,8,["modelValue","form-config"])]),g("div",Xe,[C(e.$slots,"controls",{},void 0,!0)]),i(L,{modelValue:Q(S),"onUpdate:modelValue":o[2]||(o[2]=n=>Ce(S)?S.value=n:null),title:"更多筛选项"},{default:r(()=>[i(X,{ref_key:"drawerFilterRef",ref:Y,modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=n=>y.value=n),"form-config":se.value,"form-raw-config":{labelPosition:"top"}},null,8,["modelValue","form-config"]),g("div",Ze,[i(T,{type:"primary",link:"",onClick:fe},{default:r(()=>o[5]||(o[5]=[E("重置")])),_:1}),i(T,{type:"primary",onClick:ue},{default:r(()=>o[6]||(o[6]=[E("查询")])),_:1})])]),_:1},8,["modelValue"])]),g("div",Ne,[e.tableConfig?(d(),F(de,f({key:0,ref_key:"tableRef",ref:a,data:_.value,height:"100%"},e.tableConfig.tableProps),R({default:r(()=>{var n;return[(n=e.tableConfig.tableSlots)!=null&&n.default?j("",!0):(d(!0),z(J,{key:0},b(e.tableConfig.tableColumnsConfig,(u,V)=>(d(),F(O,f({key:V,ref_for:!0},u.columnProps),R({_:2},[b(e.tableConfig.tableSlots,(ao,N)=>({name:N,fn:r(ge=>[C(e.$slots,N,f({ref_for:!0},ge),void 0,!0)])}))]),1040))),128))]}),_:2},[b(e.tableConfig.tableSlots,(n,u)=>({name:u,fn:r(V=>[C(e.$slots,u,H(I(V)),void 0,!0)])}))]),1040,["data"])):j("",!0),e.tableV2Config?(d(),F(ce,f({key:1,ref_key:"tableV2Ref",ref:B},e.tableV2Config.tableProps,{data:_.value}),R({_:2},[b(e.tableV2Config.tableSlots,(n,u)=>({name:u,fn:r(V=>[C(e.$slots,u,H(I(V)),void 0,!0)])}))]),1040,["data"])):j("",!0)]),g("div",xe,[g("div",eo,[C(e.$slots,"pagination-controls",{},void 0,!0)]),i(pe,f({layout:"total, prev, pager, next, jumper, sizes"},e.paginationConfig.paginationProps,{"current-page":s.value.currentPage,"onUpdate:currentPage":o[3]||(o[3]=n=>s.value.currentPage=n),"page-size":s.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=n=>s.value.pageSize=n),total:s.value.total,onCurrentChange:t,onSizeChange:K}),R({_:2},[b(e.paginationConfig.paginationSlots,(n,u)=>({name:u,fn:r(V=>[C(e.$slots,u,H(I(V)),void 0,!0)])}))]),1040,["current-page","page-size","total"])])])}}}),to=ne(oo,[["__scopeId","data-v-08f39dbf"]]),uo=Z(to);export{io as C,so as H,uo as a};
