import{w as Z}from"./comp.BUZR0mcz.js";import{p as G,d as K,c as I,o as p,j as m,t as ve,a as E,_ as re,b3 as ne,b4 as se,aR as U,C as i,b as F,w as n,G as f,aw as D,ax as H,F as Q,B as w,ai as _e,K as c,k as P,au as R,e as j,H as x,r as b,aj as Ce,h as ee,a2 as be}from"./framework.Di3uJiT4.js";import{a as we,b as he,c as ye,d as Ve,e as ke,f as Ee,g as Re,h as Se,i as Pe,j as Fe,k as Me,l as $e,m as De,n as He,o as Ie,p as ze,q as Be,r as Te,s as Ue,t as je,u as qe,v as Le,w as oe,x as A,E as te}from"./theme.D2w2kw51.js";const Oe=(l=!1)=>{const t=G(l);return{visible:t,show:()=>{t.value=!0},hide:()=>{t.value=!1},toggle:()=>{t.value=!t.value}}},We={class:"greetings"},Ae={class:"green"},Ge=K({__name:"HelloWorld",props:{msg:{}},setup(l){return(t,v)=>(p(),I("div",We,[m("h1",Ae,ve(t.msg),1),v[0]||(v[0]=m("h3",null,[E(" You’ve successfully created a project with "),m("a",{href:"https://vite.dev/",target:"_blank",rel:"noopener"},"Vite"),E(" + "),m("a",{href:"https://vuejs.org/",target:"_blank",rel:"noopener"},"Vue 3"),E(". ")],-1))]))}}),Ke=re(Ge,[["__scopeId","data-v-159c3112"]]),io=Z(Ke),ae={ElAutocomplete:Le,ElCascader:qe,ElCheckbox:je,ElCheckboxGroup:Ue,ElColorPicker:Te,ElDatePicker:Be,ElInput:ze,ElInputNumber:Ie,ElInputTag:He,ElMention:De,ElRadio:$e,ElRate:Me,ElSelect:Fe,ElSelectV2:Pe,ElSlider:Se,ElSwitch:Re,ElTimePicker:Ee,ElTimeSelect:ke,ElTransfer:Ve,ElTreeSelect:ye,ElUpload:he,ElSegmented:we},T=l=>typeof l=="function"?l():l,X=K({__name:"ConfigForm",props:ne({formConfig:{},formRawConfig:{},rowConfig:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l,{expose:t}){const v=se(l,"modelValue"),g=U("formRef"),M=s=>s.isVisible?s.isVisible(v.value):!0,$=(s,z)=>{var _;return s.field??((_=T(s.formItemProps))==null?void 0:_.prop)??z};return t({formRef:g}),(s,z)=>{const _=i("el-form-item"),u=i("el-col"),V=i("el-row"),q=i("el-form");return p(),F(q,c({ref_key:"formRef",ref:g,model:v.value},s.formRawConfig),{default:n(()=>[f(V,D(H(s.rowConfig)),{default:n(()=>[(p(!0),I(Q,null,w(s.formConfig,(a,Y)=>_e((p(),F(u,c({key:$(a,Y),ref_for:!0},P(T)(a.colProps)),{default:n(()=>[f(_,c({ref_for:!0},P(T)(a.formItemProps)),R({default:n(()=>{var S;return[(S=a.formItemSlots)!=null&&S.default?j("",!0):(p(),I(Q,{key:0},[$(a)?(p(),F(x(typeof a.component=="string"?P(ae)[a.component]:a.component),c({key:0,modelValue:v.value[$(a)],"onUpdate:modelValue":k=>v.value[$(a)]=k,ref_for:!0},P(T)(a.componentProps)),R({_:2},[w(a.componentSlots,(k,h)=>({name:h,fn:n(C=>[b(s.$slots,h,c({ref_for:!0},C))])}))]),1040,["modelValue","onUpdate:modelValue"])):(p(),F(x(typeof a.component=="string"?P(ae)[a.component]:a.component),c({key:1,ref_for:!0},P(T)(a.componentProps)),R({_:2},[w(a.componentSlots,(k,h)=>({name:h,fn:n(C=>[b(s.$slots,h,c({ref_for:!0},C))])}))]),1040))],64))]}),_:2},[w(a.formItemSlots,(S,k)=>({name:k,fn:n(h=>[b(s.$slots,k,c({ref_for:!0},h))])}))]),1040)]),_:2},1040)),[[Ce,M(a)]])),128))]),_:3},16)]),_:3},16,["model"])}}}),uo=Z(X),le=l=>{const{paginationProps:t}=l;return{current:(t==null?void 0:t.currentPage)??1,pageSize:(t==null?void 0:t.pageSize)??10,total:(t==null?void 0:t.total)??0}},Ye={class:"config-search-page"},Je={key:0,class:"config-header-wrap"},Qe={class:"config-filter-wrap"},Xe={class:"config-filter-list"},Ze={class:"config-filter-controls"},Ne={class:"drawer-btn-box"},xe={class:"config-table-wrap"},eo={class:"config-pagination-wrap"},oo={class:"config-pagination-controls"},to=K({__name:"ConfigSearchPage",props:ne({pageHeaderConfig:{},filterConfig:{default:()=>[]},tableConfig:{},tableV2Config:{},paginationConfig:{default:()=>({})},request:{}},{filterModel:{required:!0},filterModelModifiers:{}}),emits:["update:filterModel"],setup(l,{expose:t}){const v=K({setup(){return()=>f("div",{class:"list-btn-box"},[f(i("el-divider"),{direction:"vertical",style:"margin-left: 0px"},null),f(i("el-button"),{type:"primary",link:!0,onClick:q},{default:()=>[E("重置")]}),f(i("el-button"),{type:"primary",link:!0,onClick:V},{default:()=>[E("查询")]}),f(i("el-button"),{type:"primary",link:!0,onClick:ue},{default:()=>[E("更多筛选项")]})])}}),g=se(l,"filterModel"),M=U("listFilterRef"),$=ee(()=>l.filterConfig.concat([{component:v,formItemProps:{style:"height: calc(100% - 18px)"}}]).map(e=>{const o=oe(e,["onlyInDrawer","onlyInList"]);return{...o,colProps:{span:8,...o.colProps},isVisible:()=>!e.onlyInDrawer}})),s=U("tableRef"),z=U("tableV2Ref"),_=G([]),u=G(le(l.paginationConfig)),V=async()=>{const e=g.value;if(!l.request){_.value=[],u.value.total=0;return}try{const o=await l.request({...e,offset:(u.value.current-1)*u.value.pageSize,limit:u.value.pageSize});_.value=o.data??[],u.value.total=o.total??0}catch(o){te.error("Error fetching data:",o.message),_.value=[],u.value.total=0}},q=()=>{var e,o;(o=(e=M.value)==null?void 0:e.formRef)==null||o.resetFields(),u.value=le(l.paginationConfig),V()},a=e=>{console.log(`current page: ${e}`),V()},Y=e=>{console.log(`${e} items per page`),V()},{visible:S,show:k,hide:h}=Oe(),C=G(A(g.value)),J=U("drawerFilterRef"),ie=ee(()=>l.filterConfig.map(e=>{const o=oe(e,["onlyInDrawer","onlyInList"]);return{...o,colProps:{span:24,...o.colProps},isVisible:()=>!e.onlyInList}})),ue=()=>{C.value=A(g.value),k()},fe=async()=>{var e,o,L,B,O;try{await((o=(e=J.value)==null?void 0:e.formRef)==null?void 0:o.validate()),g.value=A(C.value),V(),h()}catch(W){console.log(W),te.error((O=(B=(L=Object.values(W))==null?void 0:L[0])==null?void 0:B[0])==null?void 0:O.message)}},de=()=>{C.value=A(g.value)};return t({filterModel:g,filterRef:M,drawerFilterModel:C,drawerFilterRef:J,tableRef:s,tableV2Ref:z,searchHandle:V,resetHandle:q}),(e,o)=>{const L=i("el-page-header"),B=i("el-button"),O=i("el-drawer"),W=i("el-table-column"),ce=i("el-table"),pe=i("el-table-v2"),ge=i("el-pagination");return p(),I("div",Ye,[e.pageHeaderConfig?(p(),I("div",Je,[f(L,D(H(e.pageHeaderConfig.pageHeaderProps)),R({_:2},[w(e.pageHeaderConfig.pageHeaderSlots,(r,d)=>({name:d,fn:n(y=>[b(e.$slots,d,D(H(y)),void 0,!0)])}))]),1040)])):j("",!0),m("div",Qe,[m("div",Xe,[f(X,{ref_key:"listFilterRef",ref:M,class:"config-filter-list-form",modelValue:g.value,"onUpdate:modelValue":o[0]||(o[0]=r=>g.value=r),"form-config":$.value,"form-raw-config":{labelWidth:"auto"},"row-config":{gutter:15}},null,8,["modelValue","form-config"])]),m("div",Ze,[b(e.$slots,"controls",{},void 0,!0)]),f(O,{modelValue:P(S),"onUpdate:modelValue":o[2]||(o[2]=r=>be(S)?S.value=r:null),title:"更多筛选项"},{default:n(()=>[f(X,{ref_key:"drawerFilterRef",ref:J,modelValue:C.value,"onUpdate:modelValue":o[1]||(o[1]=r=>C.value=r),"form-config":ie.value,"form-raw-config":{labelPosition:"top"}},null,8,["modelValue","form-config"]),m("div",Ne,[f(B,{type:"primary",link:"",onClick:de},{default:n(()=>o[5]||(o[5]=[E("重置")])),_:1}),f(B,{type:"primary",onClick:fe},{default:n(()=>o[6]||(o[6]=[E("查询")])),_:1})])]),_:1},8,["modelValue"])]),m("div",xe,[e.tableConfig?(p(),F(ce,c({key:0,ref_key:"tableRef",ref:s,data:_.value,height:"100%"},e.tableConfig.tableProps),R({default:n(()=>{var r;return[(r=e.tableConfig.tableSlots)!=null&&r.default?j("",!0):(p(!0),I(Q,{key:0},w(e.tableConfig.tableColumnsConfig,(d,y)=>(p(),F(W,c({key:y,ref_for:!0},d.columnProps),R({_:2},[w(e.tableConfig.tableSlots,(lo,N)=>({name:N,fn:n(me=>[b(e.$slots,N,c({ref_for:!0},me),void 0,!0)])}))]),1040))),128))]}),_:2},[w(e.tableConfig.tableSlots,(r,d)=>({name:d,fn:n(y=>[b(e.$slots,d,D(H(y)),void 0,!0)])}))]),1040,["data"])):j("",!0),e.tableV2Config?(p(),F(pe,c({key:1,ref_key:"tableV2Ref",ref:z},e.tableV2Config.tableProps,{data:_.value}),R({_:2},[w(e.tableV2Config.tableSlots,(r,d)=>({name:d,fn:n(y=>[b(e.$slots,d,D(H(y)),void 0,!0)])}))]),1040,["data"])):j("",!0)]),m("div",eo,[m("div",oo,[b(e.$slots,"pagination-controls",{},void 0,!0)]),f(ge,c({"current-page":u.value.current,"onUpdate:currentPage":o[3]||(o[3]=r=>u.value.current=r),"page-size":u.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=r=>u.value.pageSize=r),total:u.value.total,layout:"total, prev, pager, next, jumper, sizes"},e.paginationConfig.paginationProps,{onCurrentChange:a,onSizeChange:Y}),R({_:2},[w(e.paginationConfig.paginationSlots,(r,d)=>({name:d,fn:n(y=>[b(e.$slots,d,D(H(y)),void 0,!0)])}))]),1040,["current-page","page-size","total"])])])}}}),ao=re(to,[["__scopeId","data-v-6f67b4d8"]]),fo=Z(ao);export{uo as C,io as H,fo as a};
