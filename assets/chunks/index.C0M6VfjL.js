import{w as X}from"./comp.BUZR0mcz.js";import{p as T,d as G,c as H,o as p,j as C,t as ge,a as P,_ as ne,q as me,b3 as ve,b4 as Ce,aR as U,C as u,b as D,w as f,G as c,aw as M,ax as I,F as A,B as y,e as z,K as v,au as F,H as N,k as J,r as h,h as x,a2 as _e}from"./framework.Di3uJiT4.js";import{a as be,b as we,c as he,d as ye,e as ke,f as Ve,g as Ee,h as Re,i as Se,j as Pe,k as Fe,l as $e,m as De,n as He,o as Me,p as Ie,q as ze,r as Be,s as Te,t as Ue,u as je,v as qe,w as ee,x as L,E as oe}from"./theme.BIrieOrD.js";const Oe=(n=!1)=>{const t=T(n);return{visible:t,show:()=>{t.value=!0},hide:()=>{t.value=!1},toggle:()=>{t.value=!t.value}}},We={class:"greetings"},Le={class:"green"},Ae=G({__name:"HelloWorld",props:{msg:{}},setup(n){return(t,s)=>(p(),H("div",We,[C("h1",Le,ge(t.msg),1),s[0]||(s[0]=C("h3",null,[P(" You’ve successfully created a project with "),C("a",{href:"https://vite.dev/",target:"_blank",rel:"noopener"},"Vite"),P(" + "),C("a",{href:"https://vuejs.org/",target:"_blank",rel:"noopener"},"Vue 3"),P(". ")],-1))]))}}),Ge=ne(Ae,[["__scopeId","data-v-62ef51cf"]]),io=X(Ge),te={ElAutocomplete:qe,ElCascader:je,ElCheckbox:Ue,ElCheckboxGroup:Te,ElColorPicker:Be,ElDatePicker:ze,ElInput:Ie,ElInputNumber:Me,ElInputTag:He,ElMention:De,ElRadio:$e,ElRate:Fe,ElSelect:Pe,ElSelectV2:Se,ElSlider:Re,ElSwitch:Ee,ElTimePicker:Ve,ElTimeSelect:ke,ElTransfer:ye,ElTreeSelect:he,ElUpload:we,ElSegmented:be},Ke=(n,t)=>{for(const s of t){const r=s.watch;r&&me(()=>r.fields.map(g=>n.value[g]),(g,_,a)=>{r.cb(g,_,s,a)},r.options)}},Q=G({__name:"ConfigForm",props:ve({formConfig:{},formRawConfig:{},rowConfig:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n,{expose:t}){const s=Ce(n,"modelValue"),r=U("formRef");Ke(s,n.formConfig);const g=a=>a.isVisible?a.isVisible(s.value):!0,_=(a,R)=>{var b;return a.field??((b=a.formItemProps)==null?void 0:b.prop)??R};return t({formRef:r}),(a,R)=>{const b=u("el-form-item"),d=u("el-col"),k=u("el-row"),j=u("el-form");return p(),D(j,v({ref_key:"formRef",ref:r,model:s.value},a.formRawConfig),{default:f(()=>[c(k,M(I(a.rowConfig)),{default:f(()=>[(p(!0),H(A,null,y(a.formConfig,(l,K)=>(p(),H(A,{key:_(l,K)},[g(l)?(p(),D(d,v({key:0,ref_for:!0},l.colProps),{default:f(()=>[c(b,v({ref_for:!0},l.formItemProps),F({default:f(()=>{var $;return[($=l.formItemSlots)!=null&&$.default?z("",!0):(p(),H(A,{key:0},[_(l)?(p(),D(N(typeof l.component=="string"?J(te)[l.component]:l.component),v({key:0,modelValue:s.value[_(l)],"onUpdate:modelValue":S=>s.value[_(l)]=S,ref_for:!0},l.componentProps),F({_:2},[y(l.componentSlots,(S,V)=>({name:V,fn:f(w=>[h(a.$slots,V,v({ref_for:!0},w))])}))]),1040,["modelValue","onUpdate:modelValue"])):(p(),D(N(typeof l.component=="string"?J(te)[l.component]:l.component),v({key:1,ref_for:!0},l.componentProps),F({_:2},[y(l.componentSlots,(S,V)=>({name:V,fn:f(w=>[h(a.$slots,V,v({ref_for:!0},w))])}))]),1040))],64))]}),_:2},[y(l.formItemSlots,($,S)=>({name:S,fn:f(V=>[h(a.$slots,S,v({ref_for:!0},V))])}))]),1040)]),_:2},1040)):z("",!0)],64))),128))]),_:3},16)]),_:3},16,["model"])}}}),fo=X(Q),ae=n=>{const t={};return n.reduce((s,r)=>{const{default:g,field:_,formItemProps:a}=r,R=_??(a==null?void 0:a.prop);return R&&(s[R]=typeof g=="function"?g():g),s},t)},le=n=>{const{paginationProps:t}=n;return{current:(t==null?void 0:t.currentPage)??1,pageSize:(t==null?void 0:t.pageSize)??10,total:(t==null?void 0:t.total)??0}},Ye={class:"config-search-page"},Je={key:0,class:"config-header-wrap"},Qe={class:"config-filter-wrap"},Xe={class:"config-filter-list"},Ze={class:"config-filter-controls"},Ne={class:"drawer-btn-box"},xe={class:"config-table-wrap"},eo={class:"config-pagination-wrap"},oo={class:"config-pagination-controls"},to=G({__name:"ConfigSearchPage",props:{pageHeaderConfig:{},filterConfig:{default:()=>[]},tableConfig:{},tableV2Config:{},paginationConfig:{default:()=>({})},request:{}},setup(n,{expose:t}){const s=G({setup(){return()=>c("div",{class:"list-btn-box"},[c(u("el-divider"),{direction:"vertical",style:"margin-left: 0px"},null),c(u("el-button"),{type:"primary",link:!0,onClick:j},{default:()=>[P("重置")]}),c(u("el-button"),{type:"primary",link:!0,onClick:k},{default:()=>[P("查询")]}),c(u("el-button"),{type:"primary",link:!0,onClick:se},{default:()=>[P("更多筛选项")]})])}}),r=T(ae(n.filterConfig)),g=U("listFilterRef"),_=x(()=>n.filterConfig.filter(e=>!e.onlyInDrawer).concat([{component:s,formItemProps:{style:"height: calc(100% - 18px)"}}]).map(e=>{const o=ee(e,["default","onlyInDrawer","onlyInList"]);return{...o,colProps:{span:8,...o.colProps}}})),a=U("tableRef"),R=U("tableV2Ref"),b=T([]),d=T(le(n.paginationConfig)),k=async()=>{const e=r.value;if(!n.request){b.value=[],d.value.total=0;return}try{const o=await n.request({...e,offset:(d.value.current-1)*d.value.pageSize,limit:d.value.pageSize});b.value=o.data??[],d.value.total=o.total??0}catch(o){oe.error("Error fetching data:",o.message),b.value=[],d.value.total=0}},j=()=>{r.value=ae(n.filterConfig),d.value=le(n.paginationConfig),k()},l=e=>{console.log(`current page: ${e}`),k()},K=e=>{console.log(`${e} items per page`),k()},{visible:$,show:S,hide:V}=Oe(),w=T(L(r.value)),Y=U("drawerFilterRef"),re=x(()=>n.filterConfig.filter(e=>!e.onlyInList).map(e=>{const o=ee(e,["default","onlyInDrawer","onlyInList"]);return{...o,colProps:{span:24,...o.colProps}}})),se=()=>{w.value=L(r.value),S()},ie=async()=>{var e,o,q,B,O;try{await((o=(e=Y.value)==null?void 0:e.formRef)==null?void 0:o.validate()),r.value=L(w.value),k(),V()}catch(W){console.log(W),oe.error((O=(B=(q=Object.values(W))==null?void 0:q[0])==null?void 0:B[0])==null?void 0:O.message)}},fe=()=>{w.value=L(r.value),k()};return t({filterModel:r,filterRef:g,drawerFilterModel:w,drawerFilterRef:Y,tableRef:a,tableV2Ref:R,searchHandle:k,resetHandle:j}),(e,o)=>{const q=u("el-page-header"),B=u("el-button"),O=u("el-drawer"),W=u("el-table-column"),ue=u("el-table"),de=u("el-table-v2"),ce=u("el-pagination");return p(),H("div",Ye,[e.pageHeaderConfig?(p(),H("div",Je,[c(q,M(I(e.pageHeaderConfig.pageHeaderProps)),F({_:2},[y(e.pageHeaderConfig.pageHeaderSlots,(i,m)=>({name:m,fn:f(E=>[h(e.$slots,m,M(I(E)),void 0,!0)])}))]),1040)])):z("",!0),C("div",Qe,[C("div",Xe,[c(Q,{ref_key:"listFilterRef",ref:g,class:"config-filter-list-form",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=i=>r.value=i),"form-config":_.value,"form-raw-config":{labelWidth:"auto"},"row-config":{gutter:15}},null,8,["modelValue","form-config"])]),C("div",Ze,[h(e.$slots,"controls",{},void 0,!0)]),c(O,{modelValue:J($),"onUpdate:modelValue":o[2]||(o[2]=i=>_e($)?$.value=i:null),title:"更多筛选项"},{default:f(()=>[c(Q,{ref_key:"drawerFilterRef",ref:Y,modelValue:w.value,"onUpdate:modelValue":o[1]||(o[1]=i=>w.value=i),"form-config":re.value,"form-raw-config":{labelPosition:"top"}},null,8,["modelValue","form-config"]),C("div",Ne,[c(B,{type:"primary",link:"",onClick:fe},{default:f(()=>o[5]||(o[5]=[P("重置")])),_:1}),c(B,{type:"primary",onClick:ie},{default:f(()=>o[6]||(o[6]=[P("查询")])),_:1})])]),_:1},8,["modelValue"])]),C("div",xe,[e.tableConfig?(p(),D(ue,v({key:0,ref_key:"tableRef",ref:a,data:b.value,height:"100%"},e.tableConfig.tableProps),F({default:f(()=>{var i;return[(i=e.tableConfig.tableSlots)!=null&&i.default?z("",!0):(p(!0),H(A,{key:0},y(e.tableConfig.tableColumnsConfig,(m,E)=>(p(),D(W,v({key:E,ref_for:!0},m.columnProps),F({_:2},[y(e.tableConfig.tableSlots,(lo,Z)=>({name:Z,fn:f(pe=>[h(e.$slots,Z,v({ref_for:!0},pe),void 0,!0)])}))]),1040))),128))]}),_:2},[y(e.tableConfig.tableSlots,(i,m)=>({name:m,fn:f(E=>[h(e.$slots,m,M(I(E)),void 0,!0)])}))]),1040,["data"])):z("",!0),e.tableV2Config?(p(),D(de,v({key:1,ref_key:"tableV2Ref",ref:R},e.tableV2Config.tableProps,{data:b.value}),F({_:2},[y(e.tableV2Config.tableSlots,(i,m)=>({name:m,fn:f(E=>[h(e.$slots,m,M(I(E)),void 0,!0)])}))]),1040,["data"])):z("",!0)]),C("div",eo,[C("div",oo,[h(e.$slots,"pagination-controls",{},void 0,!0)]),c(ce,v({"current-page":d.value.current,"onUpdate:currentPage":o[3]||(o[3]=i=>d.value.current=i),"page-size":d.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=i=>d.value.pageSize=i),total:d.value.total,layout:"total, prev, pager, next, jumper, sizes"},e.paginationConfig.paginationProps,{onCurrentChange:l,onSizeChange:K}),F({_:2},[y(e.paginationConfig.paginationSlots,(i,m)=>({name:m,fn:f(E=>[h(e.$slots,m,M(I(E)),void 0,!0)])}))]),1040,["current-page","page-size","total"])])])}}}),ao=ne(to,[["__scopeId","data-v-391b378d"]]),uo=X(ao);export{fo as C,io as H,uo as a};
