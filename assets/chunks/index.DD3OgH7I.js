import{w as Z}from"./comp.BUZR0mcz.js";import{p as A,d as G,c as z,o as d,j as g,t as me,a as S,_ as le,aU as ne,aV as re,aS as q,C as r,b as I,w as n,G as i,ax as $,ay as H,F as J,B as w,ak as ve,K as f,av as R,e as T,I as x,k as Q,r as C,al as _e,h as ee,a2 as be}from"./framework.F4jIeESc.js";import{a as Ce,b as we,c as ye,d as he,e as Ve,f as ke,g as Pe,h as Ee,i as Se,j as Re,k as Fe,l as Ie,m as Me,n as De,o as $e,p as He,q as ze,r as Be,s as Ue,t as qe,u as Te,v as je,w as oe,x as W,E as te}from"./theme.BZpo0_Z5.js";const Le=(c=!1)=>{const p=A(c);return{visible:p,show:()=>{p.value=!0},hide:()=>{p.value=!1},toggle:()=>{p.value=!p.value}}},Oe={class:"greetings"},We={class:"green"},Ae=G({__name:"HelloWorld",props:{msg:{}},setup(c){return(p,m)=>(d(),z("div",Oe,[g("h1",We,me(p.msg),1),m[0]||(m[0]=g("h3",null,[S(" You’ve successfully created a project with "),g("a",{href:"https://vite.dev/",target:"_blank",rel:"noopener"},"Vite"),S(" + "),g("a",{href:"https://vuejs.org/",target:"_blank",rel:"noopener"},"Vue 3"),S(". ")],-1))]))}}),Ge=le(Ae,[["__scopeId","data-v-159c3112"]]),so=Z(Ge),ae={ElAutocomplete:je,ElCascader:Te,ElCheckbox:qe,ElCheckboxGroup:Ue,ElColorPicker:Be,ElDatePicker:ze,ElInput:He,ElInputNumber:$e,ElInputTag:De,ElMention:Me,ElRadio:Ie,ElRate:Fe,ElSelect:Re,ElSelectV2:Se,ElSlider:Ee,ElSwitch:Pe,ElTimePicker:ke,ElTimeSelect:Ve,ElTransfer:he,ElTreeSelect:ye,ElUpload:we,ElSegmented:Ce},X=G({__name:"ConfigForm",props:ne({formConfig:{},formRawConfig:{},rowConfig:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c,{expose:p}){const m=re(c,"modelValue"),M=q("formRef"),v=a=>a.isVisible?a.isVisible(m.value):!0,y=a=>typeof a=="function"?a():a,D=(a,B)=>{var _;return a.field??((_=y(a.formItemProps))==null?void 0:_.prop)??B};return p({formRef:M}),(a,B)=>{const _=r("el-form-item"),s=r("el-col"),h=r("el-row"),j=r("el-form");return d(),I(j,f({ref_key:"formRef",ref:M,model:m.value},a.formRawConfig),{default:n(()=>[i(h,$(H(a.rowConfig)),{default:n(()=>[(d(!0),z(J,null,w(a.formConfig,(t,K)=>ve((d(),I(s,f({key:D(t,K),ref_for:!0},y(t.colProps)),{default:n(()=>[i(_,f({ref_for:!0},y(t.formItemProps)),R({default:n(()=>{var F;return[(F=t.formItemSlots)!=null&&F.default?T("",!0):(d(),z(J,{key:0},[D(t)?(d(),I(x(typeof t.component=="string"?Q(ae)[t.component]:t.component),f({key:0,modelValue:m.value[D(t)],"onUpdate:modelValue":E=>m.value[D(t)]=E,ref_for:!0},y(t.componentProps)),R({_:2},[w(t.componentSlots,(E,V)=>({name:V,fn:n(k=>[C(a.$slots,V,f({ref_for:!0},k))])}))]),1040,["modelValue","onUpdate:modelValue"])):(d(),I(x(typeof t.component=="string"?Q(ae)[t.component]:t.component),f({key:1,ref_for:!0},y(t.componentProps)),R({_:2},[w(t.componentSlots,(E,V)=>({name:V,fn:n(k=>[C(a.$slots,V,f({ref_for:!0},k))])}))]),1040))],64))]}),_:2},[w(t.formItemSlots,(F,E)=>({name:E,fn:n(V=>[C(a.$slots,E,f({ref_for:!0},V))])}))]),1040)]),_:2},1040)),[[_e,v(t)]])),128))]),_:3},16)]),_:3},16,["model"])}}}),io=Z(X),Ke={class:"config-search-page"},Ye={key:0,class:"config-header-wrap"},Je={class:"config-filter-wrap"},Qe={class:"config-filter-list"},Xe={class:"config-filter-controls"},Ze={class:"drawer-btn-box"},Ne={class:"config-table-wrap"},xe={class:"config-pagination-wrap"},eo={class:"config-pagination-controls"},oo=G({__name:"ConfigSearchPage",props:ne({pageHeaderConfig:{},filterConfig:{default:()=>[]},tableConfig:{},tableV2Config:{},paginationConfig:{default:()=>({})},request:{},requestImmediate:{type:Boolean,default:!0}},{filterModel:{required:!0},filterModelModifiers:{}}),emits:["update:filterModel"],setup(c,{expose:p}){const m=G({setup(){return()=>i("div",{class:"list-btn-box"},[i(r("el-divider"),{direction:"vertical",style:"margin-left: 0px"},null),i(r("el-button"),{type:"primary",link:!0,onClick:j},{default:()=>[S("重置")]}),i(r("el-button"),{type:"primary",link:!0,onClick:h},{default:()=>[S("查询")]}),i(r("el-button"),{type:"primary",link:!0,onClick:ie},{default:()=>[S("更多筛选项")]})])}}),M=()=>{const{currentPage:e=1,pageSize:o=10,total:b=0}=c.paginationConfig.paginationProps??{};return{currentPage:e,pageSize:o,total:b}},v=re(c,"filterModel"),y=q("listFilterRef"),D=ee(()=>c.filterConfig.concat([{component:m,formItemProps:{style:"height: calc(100% - 18px)"}}]).map(e=>{const o=oe(e,["onlyInDrawer","onlyInList"]);return{...o,colProps:{span:8,...o.colProps},isVisible:b=>e.isVisible?e.isVisible(b)&&!e.onlyInDrawer:!e.onlyInDrawer}})),a=q("tableRef"),B=q("tableV2Ref"),_=A([]),s=A(M()),h=async()=>{const e=v.value;if(!c.request){_.value=[],s.value.total=0;return}try{const o=await c.request({...e,offset:(s.value.currentPage-1)*s.value.pageSize,limit:s.value.pageSize});_.value=o.data??[],s.value.total=o.total??0}catch(o){te.error("Error fetching data:",o.message),_.value=[],s.value.total=0}},j=()=>{var e,o;(o=(e=y.value)==null?void 0:e.formRef)==null||o.resetFields(),s.value=M(),h()};c.requestImmediate&&h();const t=e=>{console.log(`current page: ${e}`),h()},K=e=>{console.log(`${e} items per page`),h()},{visible:F,show:E,hide:V}=Le(),k=A(W(v.value)),Y=q("drawerFilterRef"),se=ee(()=>c.filterConfig.map(e=>{const o=oe(e,["onlyInDrawer","onlyInList"]);return{...o,colProps:{span:24,...o.colProps},isVisible:b=>e.isVisible?e.isVisible(b)&&!e.onlyInList:!e.onlyInList}})),ie=()=>{k.value=W(v.value),E()},ue=async()=>{var e,o,b,U,L;try{await((o=(e=Y.value)==null?void 0:e.formRef)==null?void 0:o.validate()),v.value=W(k.value),h(),V()}catch(O){console.log(O),te.error((L=(U=(b=Object.values(O))==null?void 0:b[0])==null?void 0:U[0])==null?void 0:L.message)}},fe=()=>{k.value=W(v.value)};return p({listFilterRef:y,drawerFilterRef:Y,tableRef:a,tableV2Ref:B,searchHandle:h,resetHandle:j}),(e,o)=>{const b=r("el-page-header"),U=r("el-button"),L=r("el-drawer"),O=r("el-table-column"),de=r("el-table"),ce=r("el-table-v2"),pe=r("el-pagination");return d(),z("div",Ke,[e.pageHeaderConfig?(d(),z("div",Ye,[i(b,$(H(e.pageHeaderConfig.pageHeaderProps)),R({_:2},[w(e.pageHeaderConfig.pageHeaderSlots,(l,u)=>({name:u,fn:n(P=>[C(e.$slots,u,$(H(P)),void 0,!0)])}))]),1040)])):T("",!0),g("div",Je,[g("div",Qe,[i(X,{ref_key:"listFilterRef",ref:y,class:"config-filter-list-form",modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=l=>v.value=l),"form-config":D.value,"form-raw-config":{labelWidth:"auto"},"row-config":{gutter:15}},null,8,["modelValue","form-config"])]),g("div",Xe,[C(e.$slots,"controls",{},void 0,!0)]),i(L,{modelValue:Q(F),"onUpdate:modelValue":o[2]||(o[2]=l=>be(F)?F.value=l:null),title:"更多筛选项"},{default:n(()=>[i(X,{ref_key:"drawerFilterRef",ref:Y,modelValue:k.value,"onUpdate:modelValue":o[1]||(o[1]=l=>k.value=l),"form-config":se.value,"form-raw-config":{labelPosition:"top"}},null,8,["modelValue","form-config"]),g("div",Ze,[i(U,{type:"primary",link:"",onClick:fe},{default:n(()=>o[5]||(o[5]=[S("重置")])),_:1}),i(U,{type:"primary",onClick:ue},{default:n(()=>o[6]||(o[6]=[S("查询")])),_:1})])]),_:1},8,["modelValue"])]),g("div",Ne,[e.tableConfig?(d(),I(de,f({key:0,ref_key:"tableRef",ref:a,data:_.value,height:"100%"},e.tableConfig.tableProps),R({default:n(()=>{var l;return[(l=e.tableConfig.tableSlots)!=null&&l.default?T("",!0):(d(!0),z(J,{key:0},w(e.tableConfig.tableColumnsConfig,(u,P)=>(d(),I(O,f({key:P,ref_for:!0},u.columnProps),R({_:2},[w(e.tableConfig.tableSlots,(ao,N)=>({name:N,fn:n(ge=>[C(e.$slots,N,f({ref_for:!0},ge),void 0,!0)])}))]),1040))),128))]}),_:2},[w(e.tableConfig.tableSlots,(l,u)=>({name:u,fn:n(P=>[C(e.$slots,u,$(H(P)),void 0,!0)])}))]),1040,["data"])):T("",!0),e.tableV2Config?(d(),I(ce,f({key:1,ref_key:"tableV2Ref",ref:B},e.tableV2Config.tableProps,{data:_.value}),R({_:2},[w(e.tableV2Config.tableSlots,(l,u)=>({name:u,fn:n(P=>[C(e.$slots,u,$(H(P)),void 0,!0)])}))]),1040,["data"])):T("",!0)]),g("div",xe,[g("div",eo,[C(e.$slots,"pagination-controls",{},void 0,!0)]),i(pe,f({layout:"total, prev, pager, next, jumper, sizes"},e.paginationConfig.paginationProps,{"current-page":s.value.currentPage,"onUpdate:currentPage":o[3]||(o[3]=l=>s.value.currentPage=l),"page-size":s.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=l=>s.value.pageSize=l),total:s.value.total,onCurrentChange:t,onSizeChange:K}),R({_:2},[w(e.paginationConfig.paginationSlots,(l,u)=>({name:u,fn:n(P=>[C(e.$slots,u,$(H(P)),void 0,!0)])}))]),1040,["current-page","page-size","total"])])])}}}),to=le(oo,[["__scopeId","data-v-a8d79ea8"]]),uo=Z(to);export{io as C,so as H,uo as a};
