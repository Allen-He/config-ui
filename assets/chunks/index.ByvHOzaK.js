import{w as Z}from"./comp.BUZR0mcz.js";import{p as A,d as G,c as z,o as d,j as g,t as me,a as E,_ as ne,aU as le,aV as re,aS as T,C as r,b as F,w as l,G as i,ax as I,ay as H,F as J,B as b,ak as ve,K as f,av as S,e as j,I as x,k as Q,r as C,al as _e,h as ee,a2 as Ce}from"./framework.F4jIeESc.js";import{a as be,b as we,c as he,d as ye,e as Ve,f as ke,g as Pe,h as Ee,i as Se,j as Re,k as Fe,l as Me,m as $e,n as De,o as Ie,p as He,q as ze,r as Ue,s as Be,t as Te,u as je,v as qe,w as oe,x as W,E as te}from"./theme.Dlm38kfk.js";const Le=(c=!1)=>{const p=A(c);return{visible:p,show:()=>{p.value=!0},hide:()=>{p.value=!1},toggle:()=>{p.value=!p.value}}},Oe={class:"greetings"},We={class:"green"},Ae=G({__name:"HelloWorld",props:{msg:{}},setup(c){return(p,m)=>(d(),z("div",Oe,[g("h1",We,me(p.msg),1),m[0]||(m[0]=g("h3",null,[E(" You’ve successfully created a project with "),g("a",{href:"https://vite.dev/",target:"_blank",rel:"noopener"},"Vite"),E(" + "),g("a",{href:"https://vuejs.org/",target:"_blank",rel:"noopener"},"Vue 3"),E(". ")],-1))]))}}),Ge=ne(Ae,[["__scopeId","data-v-159c3112"]]),so=Z(Ge),ae={ElAutocomplete:qe,ElCascader:je,ElCheckbox:Te,ElCheckboxGroup:Be,ElColorPicker:Ue,ElDatePicker:ze,ElInput:He,ElInputNumber:Ie,ElInputTag:De,ElMention:$e,ElRadio:Me,ElRate:Fe,ElSelect:Re,ElSelectV2:Se,ElSlider:Ee,ElSwitch:Pe,ElTimePicker:ke,ElTimeSelect:Ve,ElTransfer:ye,ElTreeSelect:he,ElUpload:we,ElSegmented:be},X=G({__name:"ConfigForm",props:le({formConfig:{},formRawConfig:{},rowConfig:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c,{expose:p}){const m=re(c,"modelValue"),M=T("formRef"),v=a=>a.isVisible?a.isVisible(m.value):!0,w=a=>typeof a=="function"?a():a,$=(a,U)=>{var _;return a.field??((_=w(a.formItemProps))==null?void 0:_.prop)??U};return p({formRef:M}),(a,U)=>{const _=r("el-form-item"),s=r("el-col"),k=r("el-row"),q=r("el-form");return d(),F(q,f({ref_key:"formRef",ref:M,model:m.value},a.formRawConfig),{default:l(()=>[i(k,I(H(a.rowConfig)),{default:l(()=>[(d(!0),z(J,null,b(a.formConfig,(t,K)=>ve((d(),F(s,f({key:$(t,K),ref_for:!0},w(t.colProps)),{default:l(()=>[i(_,f({ref_for:!0},w(t.formItemProps)),S({default:l(()=>{var R;return[(R=t.formItemSlots)!=null&&R.default?j("",!0):(d(),z(J,{key:0},[$(t)?(d(),F(x(typeof t.component=="string"?Q(ae)[t.component]:t.component),f({key:0,modelValue:m.value[$(t)],"onUpdate:modelValue":P=>m.value[$(t)]=P,ref_for:!0},w(t.componentProps)),S({_:2},[b(t.componentSlots,(P,h)=>({name:h,fn:l(y=>[C(a.$slots,h,f({ref_for:!0},y))])}))]),1040,["modelValue","onUpdate:modelValue"])):(d(),F(x(typeof t.component=="string"?Q(ae)[t.component]:t.component),f({key:1,ref_for:!0},w(t.componentProps)),S({_:2},[b(t.componentSlots,(P,h)=>({name:h,fn:l(y=>[C(a.$slots,h,f({ref_for:!0},y))])}))]),1040))],64))]}),_:2},[b(t.formItemSlots,(R,P)=>({name:P,fn:l(h=>[C(a.$slots,P,f({ref_for:!0},h))])}))]),1040)]),_:2},1040)),[[_e,v(t)]])),128))]),_:3},16)]),_:3},16,["model"])}}}),io=Z(X),Ke={class:"config-search-page"},Ye={key:0,class:"config-header-wrap"},Je={class:"config-filter-wrap"},Qe={class:"config-filter-list"},Xe={class:"config-filter-controls"},Ze={class:"drawer-btn-box"},Ne={class:"config-table-wrap"},xe={class:"config-pagination-wrap"},eo={class:"config-pagination-controls"},oo=G({__name:"ConfigSearchPage",props:le({pageHeaderConfig:{},filterConfig:{default:()=>[]},tableConfig:{},tableV2Config:{},paginationConfig:{default:()=>({})},request:{}},{filterModel:{required:!0},filterModelModifiers:{}}),emits:["update:filterModel"],setup(c,{expose:p}){const m=G({setup(){return()=>i("div",{class:"list-btn-box"},[i(r("el-divider"),{direction:"vertical",style:"margin-left: 0px"},null),i(r("el-button"),{type:"primary",link:!0,onClick:q},{default:()=>[E("重置")]}),i(r("el-button"),{type:"primary",link:!0,onClick:k},{default:()=>[E("查询")]}),i(r("el-button"),{type:"primary",link:!0,onClick:ie},{default:()=>[E("更多筛选项")]})])}}),M=()=>{const{currentPage:e=1,pageSize:o=10,total:D=0}=c.paginationConfig.paginationProps??{};return{currentPage:e,pageSize:o,total:D}},v=re(c,"filterModel"),w=T("listFilterRef"),$=ee(()=>c.filterConfig.concat([{component:m,formItemProps:{style:"height: calc(100% - 18px)"}}]).map(e=>{const o=oe(e,["onlyInDrawer","onlyInList"]);return{...o,colProps:{span:8,...o.colProps},isVisible:()=>!e.onlyInDrawer}})),a=T("tableRef"),U=T("tableV2Ref"),_=A([]),s=A(M()),k=async()=>{const e=v.value;if(!c.request){_.value=[],s.value.total=0;return}try{const o=await c.request({...e,offset:(s.value.currentPage-1)*s.value.pageSize,limit:s.value.pageSize});_.value=o.data??[],s.value.total=o.total??0}catch(o){te.error("Error fetching data:",o.message),_.value=[],s.value.total=0}},q=()=>{var e,o;(o=(e=w.value)==null?void 0:e.formRef)==null||o.resetFields(),s.value=M(),k()},t=e=>{console.log(`current page: ${e}`),k()},K=e=>{console.log(`${e} items per page`),k()},{visible:R,show:P,hide:h}=Le(),y=A(W(v.value)),Y=T("drawerFilterRef"),se=ee(()=>c.filterConfig.map(e=>{const o=oe(e,["onlyInDrawer","onlyInList"]);return{...o,colProps:{span:24,...o.colProps},isVisible:()=>!e.onlyInList}})),ie=()=>{y.value=W(v.value),P()},ue=async()=>{var e,o,D,B,L;try{await((o=(e=Y.value)==null?void 0:e.formRef)==null?void 0:o.validate()),v.value=W(y.value),k(),h()}catch(O){console.log(O),te.error((L=(B=(D=Object.values(O))==null?void 0:D[0])==null?void 0:B[0])==null?void 0:L.message)}},fe=()=>{y.value=W(v.value)};return p({listFilterRef:w,drawerFilterRef:Y,tableRef:a,tableV2Ref:U,searchHandle:k,resetHandle:q}),(e,o)=>{const D=r("el-page-header"),B=r("el-button"),L=r("el-drawer"),O=r("el-table-column"),de=r("el-table"),ce=r("el-table-v2"),pe=r("el-pagination");return d(),z("div",Ke,[e.pageHeaderConfig?(d(),z("div",Ye,[i(D,I(H(e.pageHeaderConfig.pageHeaderProps)),S({_:2},[b(e.pageHeaderConfig.pageHeaderSlots,(n,u)=>({name:u,fn:l(V=>[C(e.$slots,u,I(H(V)),void 0,!0)])}))]),1040)])):j("",!0),g("div",Je,[g("div",Qe,[i(X,{ref_key:"listFilterRef",ref:w,class:"config-filter-list-form",modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=n=>v.value=n),"form-config":$.value,"form-raw-config":{labelWidth:"auto"},"row-config":{gutter:15}},null,8,["modelValue","form-config"])]),g("div",Xe,[C(e.$slots,"controls",{},void 0,!0)]),i(L,{modelValue:Q(R),"onUpdate:modelValue":o[2]||(o[2]=n=>Ce(R)?R.value=n:null),title:"更多筛选项"},{default:l(()=>[i(X,{ref_key:"drawerFilterRef",ref:Y,modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=n=>y.value=n),"form-config":se.value,"form-raw-config":{labelPosition:"top"}},null,8,["modelValue","form-config"]),g("div",Ze,[i(B,{type:"primary",link:"",onClick:fe},{default:l(()=>o[5]||(o[5]=[E("重置")])),_:1}),i(B,{type:"primary",onClick:ue},{default:l(()=>o[6]||(o[6]=[E("查询")])),_:1})])]),_:1},8,["modelValue"])]),g("div",Ne,[e.tableConfig?(d(),F(de,f({key:0,ref_key:"tableRef",ref:a,data:_.value,height:"100%"},e.tableConfig.tableProps),S({default:l(()=>{var n;return[(n=e.tableConfig.tableSlots)!=null&&n.default?j("",!0):(d(!0),z(J,{key:0},b(e.tableConfig.tableColumnsConfig,(u,V)=>(d(),F(O,f({key:V,ref_for:!0},u.columnProps),S({_:2},[b(e.tableConfig.tableSlots,(ao,N)=>({name:N,fn:l(ge=>[C(e.$slots,N,f({ref_for:!0},ge),void 0,!0)])}))]),1040))),128))]}),_:2},[b(e.tableConfig.tableSlots,(n,u)=>({name:u,fn:l(V=>[C(e.$slots,u,I(H(V)),void 0,!0)])}))]),1040,["data"])):j("",!0),e.tableV2Config?(d(),F(ce,f({key:1,ref_key:"tableV2Ref",ref:U},e.tableV2Config.tableProps,{data:_.value}),S({_:2},[b(e.tableV2Config.tableSlots,(n,u)=>({name:u,fn:l(V=>[C(e.$slots,u,I(H(V)),void 0,!0)])}))]),1040,["data"])):j("",!0)]),g("div",xe,[g("div",eo,[C(e.$slots,"pagination-controls",{},void 0,!0)]),i(pe,f({layout:"total, prev, pager, next, jumper, sizes"},e.paginationConfig.paginationProps,{"current-page":s.value.currentPage,"onUpdate:currentPage":o[3]||(o[3]=n=>s.value.currentPage=n),"page-size":s.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=n=>s.value.pageSize=n),total:s.value.total,onCurrentChange:t,onSizeChange:K}),S({_:2},[b(e.paginationConfig.paginationSlots,(n,u)=>({name:u,fn:l(V=>[C(e.$slots,u,I(H(V)),void 0,!0)])}))]),1040,["current-page","page-size","total"])])])}}}),to=ne(oo,[["__scopeId","data-v-08f39dbf"]]),uo=Z(to);export{io as C,so as H,uo as a};
